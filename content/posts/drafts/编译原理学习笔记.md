---
title: 编译原理学习笔记
created: 2023-06-07 12:01:51
---
## 引论

### 语言处理器

语言处理器分为编译器和解释器。程序的运行一般要经过预处理、编译、汇编、链接等环节。预处理器负责聚合源程序，并展开宏。编译器产生汇编代码，汇编器产生可重定位的机器码，再由链接器和加载器生成目标机器码。

#### 编译器和解释器

编译器将源程序翻译为另一个语言编写的等价的目标程序，而解释器则直接利用用户输入执行源程序中指定的操作。编译器产生的目标程序较解释器更快，但解释器由于逐语句执行，错误诊断较好。

#### 编译器产生汇编语言而非机器语言

汇编语言更加易于输出和调试。

### 编译器的组成

编译器由分析和综合两部分组成。分析分解源程序，加上语法结构，从而创建一个**中间表示**；它还收集源程序信息，构建一个**符号表**。综合则利用分析提供的中间表示和符号表构建目标程序。分析称为编译器的前端，而综合则称为后端

- 前端：创建中间表示
- 后端：根据中间表示创建目标程序

#### 编译流程

词法分析、语法分析、语义分析、中间代码生成器、机器无关代码优化器、代码生成器、机器相关代码优化器。

##### 词法分析

词法分析/扫描负责读入字节流，组织成有意义的词素，并输出 `(token-name, attribute-value)` 格式的词法单元（token）。

在 `position = initial + rate * 60` 中每个非空单词/符号都是一个词素。`position` 等变量被映射到 `<id, 1>` 的 token，其中 `id` 表示标识符，`1` 指向符号表中对应条目；`=` 等符号被映射到形如 `<=>` 的词法单元，其第二个参数被省略；`60` 被映射为 `<number, 60>`。

##### 语法分析

语法分析/解析根据 tokens 创建树形中间表示，常用的表示方法是语法树。

##### 语义分析

语义分析进行类型检查。编译器在这步检查运算符和分量的匹配及变量类型转换。

##### 中间代码生成

经过以上步骤编译器生成了一个明确的、低级的、类机器语言的中间表示。其中一种中间表示形式称为三地址代码，其规定：

1. 赋值指令右部最多只有一个运算符；
2. 编译器生成一个临时名称保存指令计算得到的值；
3. 运算分量个数可能小于 3。

##### 代码优化

在编译时优化代码，如编译时即进行类型转换可以消除 intofloat 运算等。部分优化编译器耗时可能很长，但也可能大幅提高程序运行效率。

##### 代码生成

从中间表示生成目标代码。若目标为机器码则需要选择寄存器或内存位置。

#### 符号表

符号表用以记录源程序中使用的变量名称，及其各种属性与相关信息，包括类型、作用域、参数数量和类型、参数传递方法、返回值等。

#### 趟

趟是对编译过程的抽象，多个步骤，如前端的词法分析、语法分析、语义分析、中间代码生成可被当作一趟。一个前端可与多个后端进行组合，用以匹配多个目标机器；一个后端也可与多个前端进行组合，用以适配不同的源语言。
